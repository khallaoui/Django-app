{% extends 'stock_debord/base.html' %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header bg-dark text-white">
                    <h3 class="card-title mb-0">
                        <i class="fas fa-question-circle me-2"></i>How to use it - Guide d'Utilisation
                    </h3>
                </div>
                <div class="card-body">
                    <div class="alert alert-info" role="alert">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Guide d'Utilisation</strong> - Documentation complète pour utiliser efficacement l'application STELLANTIS DIZ.
                    </div>

                    <!-- Quick Navigation -->
                    <div class="row mb-4">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Navigation Rapide</h5>
                                    <div class="btn-group-vertical btn-group-lg d-md-none w-100" role="group">
                                        <a href="#getting-started" class="btn btn-outline-primary mb-2">
                                            <i class="fas fa-play me-2"></i>Démarrage
                                        </a>
                                        <a href="#stock-management" class="btn btn-outline-success mb-2">
                                            <i class="fas fa-boxes me-2"></i>Gestion Stock
                                        </a>
                                        <a href="#operations" class="btn btn-outline-warning mb-2">
                                            <i class="fas fa-cogs me-2"></i>Opérations
                                        </a>
                                        <a href="#reports" class="btn btn-outline-info">
                                            <i class="fas fa-chart-bar me-2"></i>Rapports
                                        </a>
                                    </div>
                                    <div class="d-none d-md-block">
                                        <a href="#getting-started" class="btn btn-outline-primary me-2">
                                            <i class="fas fa-play me-2"></i>Démarrage
                                        </a>
                                        <a href="#stock-management" class="btn btn-outline-success me-2">
                                            <i class="fas fa-boxes me-2"></i>Gestion Stock
                                        </a>
                                        <a href="#operations" class="btn btn-outline-warning me-2">
                                            <i class="fas fa-cogs me-2"></i>Opérations
                                        </a>
                                        <a href="#reports" class="btn btn-outline-info">
                                            <i class="fas fa-chart-bar me-2"></i>Rapports
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Documentation Sections -->
                    <div class="accordion" id="documentationAccordion">
                        <!-- Getting Started Section -->
                        <div class="accordion-item" id="getting-started">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseGettingStarted">
                                    <i class="fas fa-play me-2"></i>1. Démarrage Rapide
                                </button>
                            </h2>
                            <div id="collapseGettingStarted" class="accordion-collapse collapse show" data-bs-parent="#documentationAccordion">
                                <div class="accordion-body">
                                    <h5>Bienvenue dans STELLANTIS DIZ</h5>
                                    <p>Cette application vous permet de gérer efficacement le stock en débord. Voici les étapes pour commencer :</p>
                                    
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h6><i class="fas fa-sign-in-alt me-2"></i>Connexion</h6>
                                            <ol>
                                                <li>Utilisez vos identifiants STELLANTIS</li>
                                                <li>Accédez au dashboard principal</li>
                                                <li>Vérifiez vos permissions d'accès</li>
                                            </ol>
                                        </div>
                                        <div class="col-md-6">
                                            <h6><i class="fas fa-tachometer-alt me-2"></i>Dashboard</h6>
                                            <ol>
                                                <li>Consultez les KPI en temps réel</li>
                                                <li>Naviguez entre les différents modules</li>
                                                <li>Utilisez la barre de recherche</li>
                                            </ol>
                                        </div>
                                    </div>

                                    <div class="alert alert-success mt-3">
                                        <i class="fas fa-lightbulb me-2"></i>
                                        <strong>Conseil :</strong> Commencez par explorer le dashboard pour vous familiariser avec l'interface.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Stock Management Section -->
                        <div class="accordion-item" id="stock-management">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseStockManagement">
                                    <i class="fas fa-boxes me-2"></i>2. Gestion du Stock
                                </button>
                            </h2>
                            <div id="collapseStockManagement" class="accordion-collapse collapse" data-bs-parent="#documentationAccordion">
                                <div class="accordion-body">
                                    <h5>Gestion des Références</h5>
                                    
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h6><i class="fas fa-plus me-2"></i>Ajouter une Référence</h6>
                                            <ol>
                                                <li>Cliquez sur "Ajouter Référence" dans le dashboard</li>
                                                <li>Remplissez tous les champs obligatoires :
                                                    <ul>
                                                        <li><strong>Emplacement SM :</strong> Code de l'emplacement</li>
                                                        <li><strong>Référence :</strong> Numéro de référence unique</li>
                                                        <li><strong>Nombre de bacs :</strong> Quantité en stock</li>
                                                        <li><strong>Travée débord :</strong> Localisation physique</li>
                                                    </ul>
                                                </li>
                                                <li>Validez le formulaire</li>
                                                <li>Une entrée sera automatiquement créée dans l'historique</li>
                                            </ol>
                                        </div>
                                    </div>

                                    <div class="row mt-3">
                                        <div class="col-md-6">
                                            <h6><i class="fas fa-search me-2"></i>Rechercher dans le Stock</h6>
                                            <ul>
                                                <li>Utilisez la barre de recherche en temps réel</li>
                                                <li>Recherchez par référence, emplacement ou fournisseur</li>
                                                <li>Les résultats se filtrent automatiquement</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <h6><i class="fas fa-map me-2"></i>Visualisation Cartographique</h6>
                                            <ul>
                                                <li>Accédez à "Map Débord" dans le menu</li>
                                                <li>Visualisez l'occupation des travées</li>
                                                <li>Basculez entre vue grille et liste</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Operations Section -->
                        <div class="accordion-item" id="operations">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOperations">
                                    <i class="fas fa-cogs me-2"></i>3. Opérations Courantes
                                </button>
                            </h2>
                            <div id="collapseOperations" class="accordion-collapse collapse" data-bs-parent="#documentationAccordion">
                                <div class="accordion-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h6><i class="fas fa-sign-out-alt me-2"></i>Valider une Sortie</h6>
                                            <ol>
                                                <li>Cliquez sur "Valider Sortie"</li>
                                                <li>Sélectionnez la référence</li>
                                                <li>Indiquez le nombre de bacs à sortir</li>
                                                <li>Le système vérifie automatiquement le stock disponible</li>
                                                <li>Confirmez l'opération</li>
                                            </ol>
                                            
                                            <div class="alert alert-warning">
                                                <i class="fas fa-exclamation-triangle me-2"></i>
                                                <strong>Attention :</strong> Vérifiez toujours le stock avant de valider une sortie.
                                            </div>
                                        </div>
                                        
                                        <div class="col-md-6">
                                            <h6><i class="fas fa-trash me-2"></i>Vider une Travée</h6>
                                            <ol>
                                                <li>Accédez à "Vider travée"</li>
                                                <li>Sélectionnez la travée à vider</li>
                                                <li>Confirmez l'opération</li>
                                                <li>Toutes les références seront marquées comme sorties</li>
                                            </ol>
                                            
                                            <div class="alert alert-danger">
                                                <i class="fas fa-exclamation-circle me-2"></i>
                                                <strong>Important :</strong> Cette action est irréversible !
                                            </div>
                                        </div>
                                    </div>

                                    <h6 class="mt-4"><i class="fas fa-history me-2"></i>Consulter l'Historique</h6>
                                    <ul>
                                        <li>Accédez à "Historique E/S" pour voir tous les mouvements</li>
                                        <li>Filtrez par date, type d'opération ou utilisateur</li>
                                        <li>Exportez les données si nécessaire</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Reports Section -->
                        <div class="accordion-item" id="reports">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseReports">
                                    <i class="fas fa-chart-bar me-2"></i>4. Rapports et Exports
                                </button>
                            </h2>
                            <div id="collapseReports" class="accordion-collapse collapse" data-bs-parent="#documentationAccordion">
                                <div class="accordion-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h6><i class="fas fa-file-excel me-2"></i>Export Excel</h6>
                                            <ol>
                                                <li>Cliquez sur "Exporter Excel" dans le dashboard</li>
                                                <li>Le fichier se télécharge automatiquement</li>
                                                <li>Contient toutes les références avec leurs détails</li>
                                                <li>Format compatible avec Excel et LibreOffice</li>
                                            </ol>
                                        </div>
                                        
                                        <div class="col-md-6">
                                            <h6><i class="fas fa-print me-2"></i>Impression</h6>
                                            <ol>
                                                <li>Cliquez sur "Imprimer" pour générer un rapport</li>
                                                <li>Version optimisée pour l'impression</li>
                                                <li>Inclut l'en-tête STELLANTIS DIZ</li>
                                                <li>Date et heure de génération</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Modules Section -->
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseModules">
                                    <i class="fas fa-th-large me-2"></i>5. Modules Spécialisés
                                </button>
                            </h2>
                            <div id="collapseModules" class="accordion-collapse collapse" data-bs-parent="#documentationAccordion">
                                <div class="accordion-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h6><i class="fas fa-box me-2"></i>Boot KIT</h6>
                                            <p>Gestion des kits de démarrage et des composants essentiels pour la production.</p>
                                            
                                            <h6><i class="fas fa-exchange-alt me-2"></i>Cross DOCK</h6>
                                            <p>Gestion des opérations de cross-docking et des flux de marchandises en transit.</p>
                                            
                                            <h6><i class="fas fa-truck me-2"></i>FLC</h6>
                                            <p>Suivi et optimisation des flux logistiques, gestion des transports.</p>
                                        </div>
                                        
                                        <div class="col-md-6">
                                            <h6><i class="fas fa-map me-2"></i>Map Débord</h6>
                                            <p>Visualisation cartographique du stock en débord avec occupation des travées.</p>
                                            
                                            <h6><i class="fas fa-file-alt me-2"></i>Log ext</h6>
                                            <p>Journal des événements externes, intégrations système et communications API.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- FAQ Section -->
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFAQ">
                                    <i class="fas fa-question me-2"></i>6. Questions Fréquentes
                                </button>
                            </h2>
                            <div id="collapseFAQ" class="accordion-collapse collapse" data-bs-parent="#documentationAccordion">
                                <div class="accordion-body">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h6>Q: Comment récupérer une référence supprimée par erreur ?</h6>
                                            <p><strong>R:</strong> Consultez l'historique pour voir les mouvements. Contactez l'administrateur système pour une restauration si nécessaire.</p>
                                            
                                            <h6>Q: Que faire si le stock affiché ne correspond pas à la réalité ?</h6>
                                            <p><strong>R:</strong> Vérifiez l'historique des mouvements et effectuez un inventaire physique. Ajustez les quantités si nécessaire.</p>
                                            
                                            <h6>Q: Comment ajouter une nouvelle travée ?</h6>
                                            <p><strong>R:</strong> Contactez l'administrateur système pour configurer de nouvelles travées dans le système.</p>
                                            
                                            <h6>Q: L'export Excel ne fonctionne pas, que faire ?</h6>
                                            <p><strong>R:</strong> Vérifiez que pandas est installé sur le serveur. Contactez le support technique si le problème persiste.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Support -->
                    <div class="row mt-4">
                        <div class="col-md-12">
                            <div class="card bg-light">
                                <div class="card-body text-center">
                                    <h5><i class="fas fa-headset me-2"></i>Besoin d'Aide ?</h5>
                                    <p>Si vous ne trouvez pas la réponse à votre question, contactez le support technique.</p>
                                    <div class="btn-group">
                                        <button class="btn btn-primary">
                                            <i class="fas fa-envelope me-2"></i>Email Support
                                        </button>
                                        <button class="btn btn-success">
                                            <i class="fas fa-phone me-2"></i>Appeler Support
                                        </button>
                                        <button class="btn btn-info">
                                            <i class="fas fa-ticket-alt me-2"></i>Créer Ticket
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-3">
                        <a href="{% url 'stock_debord:dashboard' %}" class="btn btn-secondary">
                            <i class="fas fa-arrow-left me-2"></i>Retour au Dashboard
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Smooth scrolling for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }
    });
});
</script>
{% endblock %}